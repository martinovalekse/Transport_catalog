# Transport_catalog

## учебный проект
Транспортный каталог и маршрутизатор. Принимает во входящий поток данные в формате JSON об остановках, маршрутах транспорта и настройки визуализации карты. По запросу выводит схему маршрутов в формате SVG, а также данные по индивидуальным запросам по отдельным остановкам и маршрутам.

Добавлена сериализация и десериализация транспортного каталога с использованием Google Protobuf.

Написан на с++ '17.

## реализация
Программа состоит из множества отдельных классов, основные:
- **transport_catalog** хранит информацию об остановках и маршрутах.
- **map_renderer** отвечает за обрисовку схемы маршрутов.
- **transport_router** строит оптимальный маршрут между двумя остановками

Эти классы создаются по умолчанию и ссылки на них передаются во владения классу **RequestHandler**, служащему интерфейсом для удобства обработки полученных запросов. Чтение данных в формате JSON осуществляется функцией **location::input::FillData(...)** получающей ссылки на транспортный каталог, визуализатор карты и обработчик запросов, а так же входящий поток. Вывод результата обработки запросов через функцию **json::Print(...)** принимающая json::Document взятый из RequestHandler.Result() и поток вывода.

В последней версии добавлена сериализация и десериализация, теперь весь проект собирается через Cmake.

## cборка с помощью CMake
- Скачайте и соберите Google Protobuf под вашу версию компилятора
- Создайте папку для сборки программы
- Откройте консоль в данной папке и введите в консоли : cmake <путь к файлу CMakeLists.txt> -DCMAKE_PREFIX_PATH= <путь к собранной библиотеке Protobuf>
- Введите команду : cmake --build .
- После сборки в папке сборки появится исполняемый файл transport_catalogue.exe.

Собранную исполнительный файл надо сначала запустить на создание транспортного каталога, для чего ему передается файл make_base.json. Это JSON словарь содержащий массив данных об остановках с маршрутами и раздел с настроками сериализации, маршрутизации и визуализации карты. В ответ на что программа сформирует и сохранит в папке с программой файл базы данных в двоичном виде.

Остается обратиться к программе с запросами, переданными так же в виде файла - process_requests.json. Содержит массив запросов к каталогу и настройки сериализации (имя фала базы данных). Последовательно, по номерам запросов программа обойдет их и выведет результативный JSON в стандартный поток вывода.

Примеры корректных make_base.json и process_requests.json приложены к проекты.

